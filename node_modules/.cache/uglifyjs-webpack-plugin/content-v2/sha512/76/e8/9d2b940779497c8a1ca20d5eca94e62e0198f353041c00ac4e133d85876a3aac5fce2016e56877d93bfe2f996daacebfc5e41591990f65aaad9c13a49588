{"code":"!function(t){var e={};function r(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var o in t)r.d(i,o,function(e){return t[e]}.bind(null,o));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=0)}([function(t,e,r){\"use strict\";r.r(e);var i=class{constructor(){this.data=[[2,0,0],[2,2,2]],this.rotate=[[[2,0,0],[2,2,2]],[[2,2],[2,0],[2,0]],[[2,2,2],[0,0,2]],[[0,2],[0,2],[2,2]]],this.dir=0,this.origin={x:0,y:0},this.timer=null}};var o=class{constructor(){this.data=[[2,2],[2,2]],this.rotate=[[[2,2],[2,2]],[[2,2],[2,2]],[[2,2],[2,2]],[[2,2],[2,2]]],this.dir=0,this.origin={x:0,y:0},this.timer=null}};var a=class{constructor(){this.data=[[2,2],[0,2],[0,2]],this.rotate=[[[2,2],[0,2],[0,2]],[[0,0,2],[2,2,2]],[[2,0],[2,0],[2,2]],[[2,2,2],[2,0,0]]],this.dir=0,this.origin={x:0,y:0},this.timer=null}};var n=class{constructor(){this.data=[[2,2,2],[0,2,0]],this.rotate=[[[2,2,2],[0,2,0]],[[0,2],[2,2],[0,2]],[[0,2,0],[2,2,2]],[[2,0],[2,2],[2,0]]],this.dir=0,this.origin={x:0,y:0},this.timer=null}};var h=class{constructor(){this.data=[[2,2,0],[0,2,2]],this.rotate=[[[2,2,0],[0,2,2]],[[0,2],[2,2],[2,0]],[[2,2,0],[0,2,2]],[[0,2],[2,2],[2,0]]],this.dir=0,this.origin={x:0,y:0},this.timer=null}};var s=class{constructor(){this.data=[[0,2,2],[2,2,0]],this.rotate=[[[0,2,2],[2,2,0]],[[2,0],[2,2],[0,2]],[[0,2,2],[2,2,0]],[[2,0],[2,2],[0,2]]],this.dir=0,this.origin={x:0,y:0},this.timer=null}};var c=class{constructor(){this.data=[[2,2,2,2]],this.rotate=[[[2,2,2,2]],[[2],[2],[2],[2]],[[2,2,2,2]],[[2],[2],[2],[2]]],this.dir=0,this.origin={x:0,y:0},this.timer=null}};class l{constructor(){this.shapesArr=[i,o,a,n,h,s,c],this.fulfiledLines=new Set,this.score=0,this.gameOver=!0}}l.prototype.generateShape=function(t,e){this.gameOver||(this.curShape&&clearInterval(this.curShape.timer),this.curShape=new(this.shapesArr[Math.floor(7*Math.random())]),this.downable(t)?this.curShape.timer=setInterval(()=>{this.goDown(t,e)},500):(this.gameOver=!0,document.querySelector(\".gameover\").classList.add(\"show-gameover\"),clearInterval(this.curShape.timer),this.updateData(this.curShape.data,t,e)))},l.prototype.refreshGame=function(t,e){for(let r=0;r<t.length;r++)for(let i=0;i<t[0].length;i++)switch(t[r][i]){case 0:e[r][i].className=\"none\";break;case 1:e[r][i].className=\"done\";break;case 2:e[r][i].className=\"current\"}},l.prototype.clearBefore=function(t){const e=this.curShape.data;for(let r=0;r<e.length;r++)for(let i=0;i<e[0].length;i++)t[r+this.curShape.origin.x][i+this.curShape.origin.y]=0},l.prototype.rotateShape=function(t,e){if(this.curShape.dir=(this.curShape.dir+1)%4,this.rotatable(this.curShape.rotate[this.curShape.dir],t)){this.clearBefore(t),this.curShape.data=this.curShape.rotate[this.curShape.dir];for(let e=0;e<this.curShape.data.length;e++)for(let r=0;r<this.curShape.data[0].length;r++)t[e+this.curShape.origin.x][r+this.curShape.origin.y]=this.curShape.data[e][r];this.refreshGame(t,e)}},l.prototype.downable=function(t){const e=this.curShape.data;for(let r=0;r<e.length;r++){if(r+this.curShape.origin.x===t.length-1)return this.settleData(e,t),!1;for(let i=0;i<e[0].length;i++)if(1===t[r+this.curShape.origin.x+1][i+this.curShape.origin.y]&&2===e[r][i])return this.settleData(e,t),!1}return!0},l.prototype.leftable=function(){const t=this.curShape.data;for(let e=0;e<t.length;e++)for(let e=0;e<t[0].length;e++)if(e+this.curShape.origin.y<1)return!1;return!0},l.prototype.rightable=function(t){const e=this.curShape.data;for(let r=0;r<e.length;r++)for(let r=0;r<e[0].length;r++)if(r+this.curShape.origin.y>=t[0].length-1)return!1;return!0},l.prototype.rotatable=function(t,e){for(let r=0;r<t.length;r++){if(r+this.curShape.origin.x>=e.length-1)return!1;for(let r=0;r<t[0].length;r++){if(r+this.curShape.origin.y>=e[0].length-1)return!1;if(r+this.curShape.origin.y<1)return!1}}return!0},l.prototype.updateData=function(t,e,r){for(let r=0;r<t.length;r++)for(let i=0;i<t[0].length;i++)e[r+this.curShape.origin.x][i+this.curShape.origin.y]=t[r][i];this.refreshGame(e,r)},l.prototype.settleData=function(t,e){for(let r=0;r<t.length;r++)for(let i=0;i<t[0].length;i++)2===e[r+this.curShape.origin.x][i+this.curShape.origin.y]&&(e[r+this.curShape.origin.x][i+this.curShape.origin.y]=1);this.removeFulfiled(e)},l.prototype.goDown=function(t,e){this.downable(t)?(this.clearBefore(t),this.curShape.origin.x++,this.updateData(this.curShape.data,t,e)):this.generateShape(t,e)},l.prototype.goLeft=function(t,e){this.leftable(t)&&(this.clearBefore(t),this.curShape.origin.y--,this.updateData(this.curShape.data,t,e))},l.prototype.goRight=function(t,e){this.rightable(t)&&(this.clearBefore(t),this.curShape.origin.y++,this.updateData(this.curShape.data,t,e))},l.prototype.removeFulfiled=function(t){for(let e=0;e<t.length;e++)t[e].every(t=>1===t)&&this.fulfiledLines.add(e);if(this.fulfiledLines.size){for(const e of this.fulfiledLines)t.splice(e,1),t.splice(0,0,[0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this.score++,document.querySelector(\".score\").innerHTML=this.score;this.fulfiledLines.clear()}};var u=l;const p=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0]],f=[];for(let t=0;t<p.length;t++){const e=[];for(let r=0;r<p[0].length;r++){const i=document.createElement(\"div\");i.className=\"none\",i.style.top=20*t+\"px\",i.style.left=20*r+\"px\",document.querySelector(\"#game\").appendChild(i),e.push(i)}f.push(e)}const d=new u;d.generateShape(p,f),document.addEventListener(\"keydown\",t=>{37===t.keyCode&&d.goLeft(p,f),39===t.keyCode&&d.goRight(p,f),40===t.keyCode&&d.goDown(p,f),32===t.keyCode&&d.rotateShape(p,f)},!1)}]);","extractedComments":[]}